/**
 * @package
 * @author  2022 3iPunt <https://www.tresipunt.com/>
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_coursetransfer/origin_restore_category_step3",["jquery","core/str","core/ajax","core/templates"],(function($,Str,Ajax,Templates){let ACTIONS={COURSE_SELECT:'[data-action="select"]',COURSE:'[data-action="course"]',NEXT:'[data-action="next"]',CHECK:'[data-action="check"]',CHECK_ACT:'[data-action="act-check"]'};function restoreCategoryStep3(region,nexturl){this.node=$(region),this.nextURL=nexturl,this.data={category:{id:parseInt($("[data-category-id]").attr("data-category-id")),name:$("[data-category-name]").attr("data-category-name"),idnumber:$("[data-category-idnumber]").attr("data-category-idnumber"),parentname:$("[data-category-parentname]").attr("data-category-parentname"),courses:[]}},this.node.find(ACTIONS.COURSE_SELECT).on("click",this.selectCourse.bind(this)),this.node.find(ACTIONS.NEXT).on("click",this.clickNext.bind(this))}return restoreCategoryStep3.prototype.selectCourse=function(e){this.node.find(ACTIONS.CATEGORY).removeClass("selected"),$("input:checked").parent().addClass("selected").parent().addClass("selected"),this.node.find(ACTIONS.NEXT).removeAttr("disabled")},restoreCategoryStep3.prototype.clickNext=function(e){let selectedcourses=$("tr.selected");this.data.category.courses=[];let data=this.data;selectedcourses.each((function(){let course={id:$(this).find("#courseid").text()};data.category.courses.push(course)}));let storageid=this.node.find('[data-region="session-storage"]');if(sessionStorage.removeItem(storageid.data("session")),data.category.courses.length>0){sessionStorage.setItem(storageid.data("session"),JSON.stringify(data));let url=new URL(this.nextURL);url=url.href.replaceAll("&amp;","&"),window.location.href=url}else this.renderError()},restoreCategoryStep3.prototype.renderError=function(alertbox){alertbox.text("Error (x): Select a category"),alertbox.removeClass("hidden")},restoreCategoryStep3.prototype.node=null,{initRestoreCategoryStep3:function(region,nexturl){return new restoreCategoryStep3(region,nexturl)}}}));

//# sourceMappingURL=origin_restore_category_step3.min.js.map