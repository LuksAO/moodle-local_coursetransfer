/**
 * @package
 * @author  2022 3iPunt <https://www.tresipunt.com/>
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_coursetransfer/origin_remove_step2_page",["jquery","core/str","core/ajax","core/templates"],(function($,Str,Ajax,Templates){let ACTIONS={COURSE_SELECT:'[data-action="select"]',COURSE:'[data-action="course"]',NEXT:'[data-action="next"]',DESTINY:'[data-action="destiny"]',CHECK:'[data-action="check"]',CHECK_ACT:'[data-action="act-check"]'};function originRemoveStep2(region){this.node=$(region);let data=JSON.parse(sessionStorage.getItem("local_coursetransfer_remove_page"));data&&$(ACTIONS.CAT_SELECT+'[data-id="'+data.categoryid+'"]').prop("checked",!0),this.selectCourse(),this.node.find(ACTIONS.COURSE_SELECT).on("click",this.selectCourse.bind(this)),this.node.find(ACTIONS.NEXT).on("click",this.clickNext.bind(this))}return originRemoveStep2.prototype.selectCourse=function(e){let selected=!1;this.node.find(ACTIONS.COURSE_SELECT).each((function(i,item){$(item).prop("checked")&&(selected=!0)})),selected?this.node.find(ACTIONS.NEXT).removeAttr("disabled"):this.node.find(ACTIONS.NEXT).prop("disabled",!0)},originRemoveStep2.prototype.clickNext=function(e){let courses=[];this.node.find(ACTIONS.COURSE_SELECT).each((function(i,item){let courseid=$(item).data("courseid");if($(item).prop("checked")){let course={id:courseid};courses.push(course)}}));let data={courses:courses};sessionStorage.setItem("local_coursetransfer_remove_page",JSON.stringify(data));let currentUrl=$(location).attr("href"),url=new URL(currentUrl);url.searchParams.set("step","3"),window.location.href=url.href},originRemoveStep2.prototype.renderErrors=function(errors,alertbox){let errorString="";alertbox.removeClass("hidden"),errors.forEach((error=>{errorString+="Error ("+error.code+"): "+error.msg+"<br>"})),alertbox.append(errorString)},originRemoveStep2.prototype.node=null,{initOriginRemoveStep2:function(region){return new originRemoveStep2(region)}}}));

//# sourceMappingURL=origin_remove_step2_page.min.js.map