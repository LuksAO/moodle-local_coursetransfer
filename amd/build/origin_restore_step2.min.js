/**
 * @package
 * @author  2022 3iPunt <https://www.tresipunt.com/>
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_coursetransfer/origin_restore_step2",["jquery","core/str","core/ajax","core/templates"],(function($,Str,Ajax,Templates){let ACTIONS_COURSE_SELECT='[data-action="select"]',ACTIONS_NEXT='[data-action="next"]';function originRestoreStep2(region){this.node=$(region);let data=JSON.parse(sessionStorage.getItem("local_coursetransfer_restore_page"));data&&data.courses.forEach((function(course){let courseid=parseInt(course.courseid),destinyid=parseInt(course.destinyid);$(ACTIONS_COURSE_SELECT+'[data-courseid="'+courseid+'"]').prop("checked",!0),$('[data-action="destiny"][data-courseid="'+courseid+'"] option[value="'+destinyid+'"]').prop("selected",!0)})),this.selectCourse(),this.node.find(ACTIONS_COURSE_SELECT).on("click",this.selectCourse.bind(this)),this.node.find(ACTIONS_NEXT).on("click",this.clickNext.bind(this))}return originRestoreStep2.prototype.selectCourse=function(e){let selected=!1;this.node.find(ACTIONS_COURSE_SELECT).each((function(i,item){$(item).prop("checked")&&(selected=!0)})),selected?this.node.find(ACTIONS_NEXT).removeAttr("disabled"):this.node.find(ACTIONS_NEXT).prop("disabled",!0)},originRestoreStep2.prototype.clickNext=function(e){let courses=[];this.node.find(ACTIONS_COURSE_SELECT).each((function(i,item){let courseid=$(item).data("courseid");if($(item).prop("checked")){let course={courseid:courseid,destinyid:$('[data-action="destiny"][data-courseid="'+courseid+'"]').val()};courses.push(course)}}));let data={courses:courses,configuration:[]};sessionStorage.setItem("local_coursetransfer_restore_page",JSON.stringify(data));let currentUrl=$(location).attr("href"),url=new URL(currentUrl);url.searchParams.set("step","3"),window.location.href=url.href},originRestoreStep2.prototype.node=null,{initRestoreStep2:function(region){return new originRestoreStep2(region)}}}));

//# sourceMappingURL=origin_restore_step2.min.js.map