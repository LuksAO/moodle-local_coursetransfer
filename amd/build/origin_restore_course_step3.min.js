/**
 * @package
 * @author  2022 3iPunt <https://www.tresipunt.com/>
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_coursetransfer/origin_restore_course_step3",["jquery","core/str","core/ajax","core/templates"],(function($,Str,Ajax,Templates){let ACTIONS_NEXT='[data-action="next"]';function restoreCourseStep3(region){this.node=$(region),this.data={course:{id:parseInt($("[data-course-id]").attr("data-course-id")),fullname:$("[data-course-fullname]").attr("data-course-fullname"),shortname:$("[data-course-shortname]").attr("data-course-shortname"),idnumber:$("[data-course-idnumber]").attr("data-course-idnumber"),categoryid:parseInt($("[data-course-categoryid]").attr("data-course-categoryid")),categoryname:$("[data-course-categoryname]").attr("data-course-categoryname"),backupsizeestimated:parseInt($("[data-course-backupsizeestimated]").attr("data-course-backupsizeestimated")),sections:[]}},this.node.find(ACTIONS_NEXT).on("click",this.clickNext.bind(this));let rawSections=[...$(".sections-table").children()];rawSections.shift(),rawSections=rawSections.filter((function(v,i){return i%2==0})),console.log(rawSections),this.data.course.sections=rawSections.map((v=>{let finalActivities=[];if(v.children.length>=2){let activities=[...[...v.children][1].children[0].children];activities.shift(),finalActivities=activities.map((v=>({selected:v.children[0].children[0].checked,cmid:v.getAttribute("data-activity-cmid"),name:v.getAttribute("data-activity-name"),instance:v.getAttribute("data-activity-instance"),modname:v.getAttribute("data-activity-modname")})))}return{selected:v.children[0].children[0].children[0].checked,sectionnum:v.getAttribute("data-section-sectionnum"),sectionid:v.getAttribute("data-section-sectionid"),sectionname:v.getAttribute("data-section-sectionname"),activities:finalActivities}}))}return restoreCourseStep3.prototype.clickNext=function(e){let rawSections=[...$(".sections-table").children()];rawSections.shift(),rawSections=rawSections.filter((function(v,i){return i%2==0})),this.data.course.sections=rawSections.map((v=>{let finalActivities=[];if(v.children.length>=2){let activities=[...[...v.children][1].children[0].children];activities.shift(),finalActivities=activities.map((v=>({selected:v.children[0].children[0].checked,cmid:v.getAttribute("data-activity-cmid"),name:v.getAttribute("data-activity-name"),instance:v.getAttribute("data-activity-instance"),modname:v.getAttribute("data-activity-modname")})))}return{selected:v.children[0].children[0].children[0].checked,sectionnum:v.getAttribute("data-section-sectionnum"),sectionid:v.getAttribute("data-section-sectionid"),sectionname:v.getAttribute("data-section-sectionname"),activities:finalActivities}})),console.log(this.data);sessionStorage.setItem("local_coursetransfer_1"+this.data.course.id,JSON.stringify(this.data))},restoreCourseStep3.prototype.node=null,{initRestoreCourseStep3:function(region){return new restoreCourseStep3(region)}}}));

//# sourceMappingURL=origin_restore_course_step3.min.js.map