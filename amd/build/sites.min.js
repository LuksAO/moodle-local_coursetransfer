/**
 * @package
 * @author  2022 3iPunt <https://www.tresipunt.com/>
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_coursetransfer/sites",["jquery","core/str","core/ajax","core/templates"],(function($,Str,Ajax,Templates){let SERVICES_SITE_ADD="local_coursetransfer_site_add",SERVICES_SITE_EDIT="local_coursetransfer_site_edit",SERVICES_SITE_REMOVE="local_coursetransfer_site_remove",ACTIONS_CREATE='[data-action="create"]',ACTIONS_EDIT='[data-action="edit"]',ACTIONS_REMOVE='[data-action="remove"]';function sites(region,type){this.node=$(region),this.type=type,console.log("Sites"),this.node.find(ACTIONS_CREATE).on("click",this.clickCreate.bind(this)),this.node.find(ACTIONS_EDIT).on("click",this.clickEdit.bind(this)),this.node.find(ACTIONS_REMOVE).on("click",this.clickRemove.bind(this))}return sites.prototype.clickCreate=function(e){$(e.currentTarget).attr("disabled",!0);let createregion=this.node.find("#createDestiny"),host=createregion.find("#host").val(),token=createregion.find("#token").val();const request={methodname:SERVICES_SITE_ADD,args:{type:this.type,host:host.trim(),token:token.trim()}};Ajax.call([request])[0].done((function(response){response.success?location.reload():console.log(response)})).fail((function(fail){console.log(fail)}))},sites.prototype.clickEdit=function(e){let button=$(e.currentTarget),siteid=button.data("id"),editregion=this.node.find("#destinyEdit"+siteid),host=editregion.find("#host").val(),token=editregion.find("#token").val();button.attr("disabled",!0);const request={methodname:SERVICES_SITE_EDIT,args:{type:this.type,id:siteid,host:host.trim(),token:token.trim()}};Ajax.call([request])[0].done((function(response){response.success?location.reload():console.log(response)})).fail((function(fail){console.log(fail)}))},sites.prototype.clickRemove=function(e){let button=$(e.currentTarget);button.attr("disabled",!0);let siteid=button.data("id");const request={methodname:SERVICES_SITE_REMOVE,args:{type:this.type,id:siteid}};Ajax.call([request])[0].done((function(response){response.success?location.reload():console.log(response)})).fail((function(fail){console.log(fail)}))},sites.prototype.node=null,{initSites:function(region,type){return new sites(region,type)}}}));

//# sourceMappingURL=sites.min.js.map